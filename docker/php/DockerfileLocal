FROM --platform=linux/amd64 php:7.4.0-fpm-alpine

RUN docker-php-ext-install mysqli pdo pdo_mysql && docker-php-ext-enable pdo_mysql

RUN apk --update --upgrade --no-cache add curl icu-dev

RUN docker-php-ext-configure intl && docker-php-ext-install intl

# Copy the php config file
COPY ./docker/php/php-fpm.local.conf /usr/local/etc/php-fpm.d/www.conf

# Custom php.ini
# COPY ./docker/php/php.ini /usr/local/etc/php/conf.d/

# Copy the application code
COPY ./public_html /app

VOLUME ["/app"]
